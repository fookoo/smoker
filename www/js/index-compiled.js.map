{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["class SmokerApp {\n    constructor() {\n        console.info('SmokerApp init');\n\n        this.counter = document.getElementById('counter');\n        this.introduction = document.getElementById('introduction');\n\n\n        this.fromColor = {r: 255, g: 0, b: 0};\n        this.toColor = {r: 0, g: 255, b: 0};\n        this.value = undefined;\n        this.longClickThreshold = 300;\n\n        this.bindEvents();\n        this.sync(false);\n\n        this.setBackground();\n        this.countdown(this.value);\n        \n    }\n\n    bindEvents() {\n        this.counter.addEventListener('touchstart', this.touchStart.bind(this));\n        this.counter.addEventListener('touchend', this.touchEnd.bind(this));\n    }\n\n    getGradientStepColor(fromColor = {r: 0, g: 0, b: 0}, toColor = {r: 0, g: 0, b: 0}, step = 0, steps = 30) {\n        return {\n            r: parseInt(fromColor.r + (((toColor.r - fromColor.r) / steps) * step)),\n            g: parseInt(fromColor.g + (((toColor.g - fromColor.g) / steps) * step)),\n            b: parseInt(fromColor.b + (((toColor.b - fromColor.b) / steps) * step))\n        }\n    }\n\n    touchStart() {\n        this.timer = new Date().getTime();\n    }\n\n    touchEnd() {\n        let duration = new Date().getTime() - this.timer;\n\n        if (duration > this.longClickThreshold) {\n            this.reset();\n        } else {\n            this.value++;\n            this.sync();\n        }\n\n        this.timer = 0;\n    }\n\n    sync(html = true) {\n        if (this.value === undefined) {\n            this.value = window.localStorage.getItem('smoker.value') || 0;\n        }\n\n        if (this.value > 0) {\n            this.introduction.classList.remove('show');\n        }\n\n        if (html){\n            this.setValueToHtml();\n            this.setBackground();\n        }\n\n\n        window.localStorage.setItem('smoker.value', this.value);\n    }\n\n    reset() {\n        this.value = 0;\n        this.introduction.classList.add('show');\n        this.sync();\n    }\n\n    setValueToHtml() {\n        this.counter.innerHTML = this.value;\n    }\n\n    setBackground() {\n        let color = this.getGradientStepColor(this.fromColor, this.toColor, this.value < 60 ? this.value : 60, 60);\n        this.counter.style.background = `rgb(${color.r},${color.g},${color.b})`;\n    }\n\n    countdown(value = 0, current = 0) {\n        if (current <= value) {\n            setTimeout(() => {\n                this.counter.innerHTML = current;\n\n                this.countdown(value, current + 1);\n            }, parseInt(1000 / value));\n        }\n\n    }\n}\n\n// start app on device ready\ndocument.addEventListener('deviceready', () => {\n    var app = new SmokerApp();\n});"]}